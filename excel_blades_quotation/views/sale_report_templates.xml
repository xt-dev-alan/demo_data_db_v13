<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_saleorder_document" inherit_id="sale.report_saleorder_document">
    
<h2 position="replace"/>
        
      <xpath expr="//table[hasclass('table')]" position="before" t-if="doc.state not in ['draft','sent']">
          <table class="table table-sm" style="margin: 0;padding: 0;">
            <thead>
              <tr>
                <th>Account #</th>
                <th>P.O No.</th>
                <th>Rep.</th>
                <th>Ship Date</th>
                <th>Ship Via</th>
                <th>Weight(s)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>..</td>
                <td>..</td>
                <td>..</td>
                <td>..</td>
                <td>..</td>
                <td>..</td>
              </tr>
            </tbody>
          </table>       
        </xpath>
        
        <div class="oe_structure" position="after">
            <div class="row">
              <div class="col-2">
                <img t-if="doc.company_id.logo" t-att-src="image_data_uri(doc.company_id.logo)" style="max-height: 100px;margin: 0;padding: 0;" alt="Logo" class="float-right"/>
              </div>
              <div class="col-4" style="font-size: 0.7rem;">
                <div class="row">
                  <h5 class="col-12" style="border-bottom: 1px solid black;padding:0; margin:0;">Excel Blades Corp.</h5>
                </div>
                <div class="row">
                  <p class="col-12 text-center" style="padding:0; margin:0;">
                    <span t-if="doc.company_id.street" t-esc="doc.company_id.street"/>
                    <span t-if="doc.company_id.street2" t-esc="doc.company_id.street2"/>
                    <span t-if="doc.company_id.city" t-esc="doc.company_id.city"/>
                    <span t-if="doc.company_id.state_id" t-esc="doc.company_id.state_id.code"/>
                    <span t-if="doc.company_id.country_id" t-esc="doc.company_id.country_id.code"/>
                  </p>
                </div>
                <div class="row" style="padding:0; margin:0;">
                  <div class="col-5" style="padding:0; margin:0;">
                    <p class="d-block" t-esc=" 'Phone: %s'% doc.company_id.phone" style="padding:0; margin:0;"/>
                    <p class="d-block" style="padding:0; margin:0;">Fax: 973-278-4343</p>
                  </div>
                  <div class="col-7" style="padding:0; margin:0;">
                    <p class="d-block" t-esc=" 'Email: %s'% doc.company_id.email" style="padding:0; margin:0;"/>
                    <p class="d-block" t-esc=" 'Website: %s'% doc.company_id.website" style="padding:0; margin:0;"/>
                  </div>
                </div>
              </div>
              <div class="col-6">
                <h2 class="mt16 text-right">
                  <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                      <span t-if="doc.state not in ['draft','sent']">Sale Order</span>
                      <span t-if="doc.state in ['draft','sent']">Quotation </span>
                  </t>
                  <t t-if="env.context.get('proforma', False) or is_pro_forma">
                      <span>Pro-Forma Invoice # </span>
                  </t>
                  <span class="d-block" t-field="doc.name"/>
              </h2>
              </div>
            </div>
            
            <div class="container" t-if="doc.state not in ['draft','sent']">
              <table class="table table-sm" width="100%">
                <thead>
                  <tr>
                    <th>Name / Address</th>
                    <th> Ship To</th>
                  </tr>
                </thead>
                <tbody>
                  <td>
                    <h6 t-esc="doc.partner_id.name"/>
                    <p class="d-block text-justify" style="padding:0; margin:0;">
                      <span t-if="doc.partner_id.street" t-esc="doc.partner_id.street"/>
                      <span t-if="doc.partner_id.street2" t-esc="doc.partner_id.street2"/>
                      <span t-if="doc.partner_id.city" t-esc="doc.partner_id.city"/>
                      <span t-if="doc.partner_id.state_id" t-esc="doc.partner_id.state_id.code"/>
                      <span t-if="doc.partner_id.country_id" t-esc="doc.partner_id.country_id.code"/>
                    </p>
                  </td>
                  <td>
                    <h6 t-esc="doc.partner_shipping_id.name"/>
                    <p class="d-block text-justify" style="padding:0; margin:0;">
                      <span t-if="doc.partner_shipping_id.street" t-esc="doc.partner_shipping_id.street"/>
                      <span t-if="doc.partner_shipping_id.street2" t-esc="doc.partner_shipping_id.street2"/>
                      <span t-if="doc.partner_shipping_id.city" t-esc="doc.partner_shipping_id.city"/>
                      <span t-if="doc.partner_shipping_id.state_id" t-esc="doc.partner_shipping_id.state_id.code"/>
                      <span t-if="doc.partner_shipping_id.country_id" t-esc="doc.partner_shipping_id.country_id.code"/>
                    </p>
                  </td>
                </tbody>
              </table>
            </div>
        </div>
        
        
          <xpath expr="//th[@name='th_quantity']" position="replace" t-if="doc.state not in ['draft','sent']"/>
          <xpath expr="//td[@name='td_quantity']" position="replace" t-if="doc.state not in ['draft','sent']"/>
        
        
        <xpath expr="//th[@name='th_description']" position="after">
            <th name="th_item_no" class="text-right">Item #</th>
            <th name="th_moq_qty" class="text-right" t-if="doc.state in ['draft','sent']">MOQ Qty</th>
            <th name="th_moq_qty" class="text-right" t-if="doc.state not in ['draft','sent']">Ordened</th>
            <th name="th_moq_qty" class="text-right" t-if="doc.state not in ['draft','sent']">Shipped</th>
        </xpath>
        <xpath expr="//th[@name='th_priceunit']" position="replace">
            <th name="th_priceunit" class="text-right" t-if="doc.state in ['draft','sent']">EA</th>
        </xpath>
        <xpath expr="//th[@name='th_taxes']" position="replace"/>
        <xpath expr="//th[@name='th_subtotal']" position="replace">
             <th name="th_total" class="text-right" t-if="doc.state in ['draft','sent']">Total</th>
             <th name="th_box" class="text-right" t-if="doc.state not in ['draft','sent']">Box Number</th>
        </xpath>
        
        <xpath expr="//td[@name='td_priceunit']" position="replace">
          <td name="td_priceunit" class="text-right" t-if="doc.state in ['draft','sent']">
            <span t-field="line.price_unit"/>
          </td>
        </xpath>        


        <xpath expr="//td[@name='td_name']" position="after">
            <td name="td_item_no" class="text-right"> <span t-esc="line.product_id.default_code or 'Â·'"/> </td>
            <td name="td_moq_qty" class="text-right" t-if="doc.state in ['draft','sent']"> <span t-esc="line.moq_qty or 0"/> </td>
            <td name="td_ordened" class="text-right" t-if="doc.state not in ['draft','sent']"> <span t-esc="line.product_uom_qty"/> </td>
            <td name="td_shipped" class="text-right" t-if="doc.state not in ['draft','sent']"> <span t-esc="line.qty_delivered"/> </td>
        </xpath>

        <xpath expr="//div[@name='total']//table" position="replace">
            <table class="table table-sm">
                <tr class="border-black o_total">
                    <td name="td_amount_total_label"><strong>Total</strong></td>
                    <td name="td_amount_total" class="text-right">
                        <span t-field="doc.amount_total"/>
                    </td>
                </tr>
            </table>
        </xpath>

        <xpath expr="//td[@name='td_taxes']" position="replace"/>

        <xpath expr="//td[@name='td_subtotal']" position="replace">
            <td name="td_total" class="text-right o_price_total" t-if="doc.state in ['draft','sent']">
                <span t-field="line.price_total"/>
            </td>
            <td name="td_box" class="text-right" t-if="doc.state not in ['draft','sent']">
                <span t-esc="0.0"/>
            </td>
        </xpath>
    </template>
</odoo>
